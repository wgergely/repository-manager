# Repository Manager - Formalized Roadmap

**Date**: 2026-02-17
**Source**: Deep audit (6 agents, 7 reports)
**Updated**: 2026-02-18 -- Removed vaultspec/agent subsystem (see Phase 2 note below)
**Structure**: Hierarchical phases with foundational dependencies

---

## Guiding Principles

1. **Foundation first** - fix adoption blockers before adding features
2. **Test what matters** - the sync projection pipeline is the core value prop; it must be tested before anything else ships
3. **Focus on core value** - tool configuration sync is the core differentiator; avoid scope creep into agent orchestration
4. **Local-first moat** - single binary, no cloud dependency, privacy-first is a genuine differentiator in 2026
5. **Ship speed > feature completeness** - the market is moving fast (Augment Intent, Warp Oz are Feb 2026 entrants)

---

## Phase 0: Unblock Adoption (Foundation)

> **Goal**: A stranger can find, install, understand, and use the tool.
> **Dependency**: None. This is the foundation everything else builds on.
> **Effort**: 1-2 days

### 0.1 README Rewrite
- [ ] Value proposition headline (what + why in one sentence)
- [ ] Feature list with the 13-tool config sync front and center
- [ ] Installation instructions (`cargo install`, release binaries)
- [ ] Quick start (init -> add-tool -> sync -> verify)
- [ ] Terminal recording / ASCII demo
- [ ] Badges (CI, license, crates.io)
- **Source**: [01-user-experience.md](audits/2026-02-17-deep-audit/01-user-experience.md), [06-documentation-ux-synthesis.md](audits/2026-02-17-deep-audit/06-documentation-ux-synthesis.md)

### 0.2 Fix Config Schema Drift
- [ ] Update `config-schema.md` to match actual implementation
- [ ] Remove documented-but-unimplemented fields (`[active]`, `[core] version`, `[project] name`, `[sync] strategy`)
- [ ] Add actual fields with examples
- **Source**: [01-user-experience.md](audits/2026-02-17-deep-audit/01-user-experience.md) S2.5, [02-technical-audit.md](audits/2026-02-17-deep-audit/02-technical-audit.md) S6

### 0.3 Fix Init -> Sync Gap
- [ ] `repo init` should either auto-run sync OR print clear "Next step: run `repo sync`"
- [ ] Test: init a project, verify tool configs are generated (or user is told how)
- **Source**: [01-user-experience.md](audits/2026-02-17-deep-audit/01-user-experience.md) S3

### 0.4 Test the Core Value Proposition (GAP-004)
- [x] Integration test: `.repository/config.toml` -> `repo sync` -> verify generated `.cursorrules`, `CLAUDE.md`, `.vscode/settings.json`
- [x] This is the SINGLE MOST IMPORTANT test in the entire codebase
- **Source**: [03-test-verification.md](audits/2026-02-17-deep-audit/03-test-verification.md) S6
- **Closed**: 2026-02-24 — `test_sync_core_value_proposition` in `crates/repo-core/tests/sync_tests.rs`

---

## Phase 1: Polish Core Experience

> **Goal**: The tool is pleasant and predictable to use.
> **Dependency**: Phase 0 complete
> **Effort**: 1-2 weeks

### 1.1 CLI Consistency
- [ ] Decide: flat (`add-tool`) vs nested (`tool add`) pattern - apply consistently
- [ ] Update spec-cli.md with ALL implemented commands
- **Source**: [01-user-experience.md](audits/2026-02-17-deep-audit/01-user-experience.md) S4

### 1.2 Missing Commands
- [ ] `repo branch rename <old> <new>`
- [ ] `repo config show` (display current configuration)
- [ ] `repo tool info <tool>` (show what a tool integration provides)
- [ ] `--dry-run` flag on `add-tool`, `remove-tool`, `add-preset`, `remove-preset`
- **Source**: [01-user-experience.md](audits/2026-02-17-deep-audit/01-user-experience.md) S5

### 1.3 Interactive Init Improvements
- [ ] Add preset selection to interactive init flow
- [ ] Show summary of what will be created before confirming
- **Source**: [01-user-experience.md](audits/2026-02-17-deep-audit/01-user-experience.md) S3

### 1.4 Documentation Site
- [ ] Set up mdBook or Starlight for user-facing docs
- [ ] Create user guide: getting-started, configuration, tools reference, presets reference
- [ ] Separate user docs from design/contributor docs
- **Source**: [06-documentation-ux-synthesis.md](audits/2026-02-17-deep-audit/06-documentation-ux-synthesis.md) S3

### 1.5 Test Infrastructure
- [ ] Set up code coverage tooling (cargo-tarpaulin or cargo-llvm-cov)
- [ ] CLI end-to-end tests (not just command existence checks)
- [ ] Merge conflict resolution tests
- **Source**: [03-test-verification.md](audits/2026-02-17-deep-audit/03-test-verification.md) S7

---

## ~~Phase 2: Vaultspec Integration (`repo agent`)~~ [REMOVED]

> **Status**: REMOVED (2026-02-18)
> **Reason**: The vaultspec agent subsystem (`repo agent` CLI commands, `repo-agent` crate,
> and associated MCP tools `agent_check`/`agent_list`/`agent_spawn`/`agent_stop`) has been
> removed from the codebase. Agent orchestration is out of scope for repository-manager.
> The project focuses on its core value proposition: tool configuration synchronization
> across 13+ AI coding tools.
>
> The vaultspec audit files (`vaultspec-01` through `vaultspec-04`) have been deleted.

---

## Phase 3: Strategic Features

> **Goal**: Competitive differentiation and enterprise readiness.
> **Dependency**: Phase 1 complete.
> **Effort**: Ongoing

### 3.1 Worktree Lifecycle Hooks
- [ ] Pre/post worktree creation hooks (install deps, copy configs)
- [ ] Pre/post hook execution (run tests, lint, validate)
- [ ] Hook configuration in `.repository/hooks/`
- **Source**: [05-feature-gaps-opportunities.md](audits/2026-02-17-deep-audit/05-feature-gaps-opportunities.md) S1.2

### 3.2 Config Governance
- [ ] `repo rules lint` - validate consistency across tools
- [ ] `repo rules diff` - show config drift
- [ ] `repo rules export --format agents` - AGENTS.md export
- [ ] `repo rules import AGENTS.md` - AGENTS.md import
- [ ] Ledger-based audit trail (who changed what, when)
- **Source**: [05-feature-gaps-opportunities.md](audits/2026-02-17-deep-audit/05-feature-gaps-opportunities.md) S3.2

### 3.3 `repo open` Command
- [ ] `repo open <worktree> [--tool cursor|vscode|zed]`
- [ ] Launch IDE/editor in specified worktree with configs applied
- **Source**: [05-feature-gaps-opportunities.md](audits/2026-02-17-deep-audit/05-feature-gaps-opportunities.md) S1.2

### 3.4 MCP Server Completion
- [ ] Implement git push/pull/merge MCP primitives
- [ ] MCP server health checks
- [ ] MCP server discovery (suggest servers based on project stack)
- **Source**: [02-technical-audit.md](audits/2026-02-17-deep-audit/02-technical-audit.md) S10

### 3.5 Global Config Layer
- [ ] `~/.config/repo/` for user-level defaults
- [ ] Org-level config layer (git-hosted shared config)
- [ ] Config hierarchy: global -> org -> project -> worktree
- **Source**: [02-technical-audit.md](audits/2026-02-17-deep-audit/02-technical-audit.md) S6

---

## Phase 4: Ecosystem & Scale

> **Goal**: Platform-level capabilities.
> **Dependency**: Phases 0-1 complete, Phase 3 substantially complete.
> **Effort**: Long-term

### 4.1 Issue-to-Worktree Automation
- [ ] `repo issue assign <issue-url>` -> creates worktree
- [ ] Auto-link worktree PR to originating issue
- [ ] GitHub/GitLab API integration

### 4.2 Optional Cloud Bridge
- [ ] `repo cloud spawn --provider daytona` for remote execution
- [ ] Keep local-first as default; cloud is opt-in

### 4.3 Interactive TUI
- [ ] Fuzzy worktree selection
- [ ] Status dashboard (worktrees, agents, config health)
- [ ] Real-time agent log streaming

### 4.4 Skills Marketplace Bridge
- [ ] Integration with Tessl registry or similar
- [ ] `repo skills search / install / list`

---

## Dependency Graph

```
Phase 0 (Foundation)
├── 0.1 README ─────────────────────────────────┐
├── 0.2 Config Schema Fix ──────────────────────┤
├── 0.3 Init -> Sync Fix ──────────────────────┤
└── 0.4 GAP-004 Test ──────────────────────────┤
                                                 │
Phase 1 (Polish)                                 │
├── 1.1 CLI Consistency                          │ ← depends on Phase 0
├── 1.2 Missing Commands                         │
├── 1.3 Interactive Init                         │
├── 1.4 Doc Site                                 │
└── 1.5 Test Infra                               │
         │                                        │
         Phase 3 (Strategic)                      │
         ├── 3.1 Hooks                            │
         ├── 3.2 Governance                       │
         ├── 3.3 repo open                        │
         ├── 3.4 MCP Completion                   │
         └── 3.5 Global Config                    │
               │                                   │
         Phase 4 (Ecosystem)                      │
         └── 4.1-4.4                              │
```

---

## Key Metrics to Track

| Metric | Current | Phase 0 Target | v1.0 Target |
|--------|---------|----------------|-------------|
| README completeness | 2/10 sections | 10/10 | 10/10 |
| Installation path | None | `cargo install` works | Multi-method |
| Test count | 1,078 | 1,100+ (GAP-004 closed) | 1,500+ |
| Sync pipeline tested | No | Yes | Full coverage |
| User docs pages | 0 | 3 (README, getting-started, tools-ref) | 10+ |
| Agent orchestration | Removed | N/A | N/A |
| Doc UX rating | 2.0/5 | 3.5/5 | 4.5/5 |

---

## Cross-References

- [00-audit-index.md](audits/2026-02-17-deep-audit/00-audit-index.md) - Master audit summary
- [01-user-experience.md](audits/2026-02-17-deep-audit/01-user-experience.md) - UX findings
- [02-technical-audit.md](audits/2026-02-17-deep-audit/02-technical-audit.md) - Technical capabilities
- [03-test-verification.md](audits/2026-02-17-deep-audit/03-test-verification.md) - Test results
- [04-competitive-landscape.md](audits/2026-02-17-deep-audit/04-competitive-landscape.md) - Competitors
- [05-feature-gaps-opportunities.md](audits/2026-02-17-deep-audit/05-feature-gaps-opportunities.md) - Gaps & opportunities
- [06-documentation-ux-synthesis.md](audits/2026-02-17-deep-audit/06-documentation-ux-synthesis.md) - Doc UX
- ~~`vaultspec-01-core-systems.md`~~ - Removed (2026-02-18)
- ~~`vaultspec-02-protocol-layer.md`~~ - Removed (2026-02-18)
- ~~`vaultspec-03-rules-agents-skills.md`~~ - Removed (2026-02-18)
- ~~`vaultspec-04-integration-viability.md`~~ - Removed (2026-02-18)

---

*Roadmap created: 2026-02-17*
*Updated: 2026-02-18 -- Vaultspec agent subsystem removed from codebase.*
